{"ast":null,"code":"import{useRecoilValue,useSetRecoilState}from\"recoil\";import{addCategoryState,Categories,categoryState,toDoState}from\"../atoms\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ToDo(props){const setToDos=useSetRecoilState(toDoState);const addCategory=useRecoilValue(addCategoryState);const category=useRecoilValue(categoryState);function onClick(event){const{currentTarget:{name}}=event;setToDos(pre=>{// 1. find t0 d0 based id\nconst targetIndex=pre.findIndex(toDo=>toDo.id===props.id);// 2. preToDo change newToDo\nconst newToDo={text:props.text,id:props.id,category:name};return[...pre.slice(0,targetIndex),newToDo,...pre.slice(targetIndex+1)];});}function onDelete(event){setToDos(pre=>{const newTodo=[...pre];const targetIndex=pre.findIndex(toDo=>toDo.id===props.id);newTodo.splice(targetIndex,1);return newTodo;});}return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:props.text}),props.category!==Categories.TO_DO&&/*#__PURE__*/_jsx(\"button\",{name:Categories.TO_DO,onClick:onClick,children:\"To Do\"}),props.category!==Categories.DOING&&/*#__PURE__*/_jsx(\"button\",{name:Categories.DOING,onClick:onClick,children:\"Doing\"}),props.category!==Categories.DONE&&/*#__PURE__*/_jsx(\"button\",{name:Categories.DONE,onClick:onClick,children:\"Done\"}),addCategory===null||addCategory===void 0?void 0:addCategory.filter(cat=>cat!==category).map((ele,idx)=>/*#__PURE__*/_jsx(\"button\",{name:ele,onClick:onClick,children:ele},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:onDelete,children:\"Delete\"})]});}export default ToDo;","map":{"version":3,"names":["useRecoilValue","useSetRecoilState","addCategoryState","Categories","categoryState","toDoState","jsx","_jsx","jsxs","_jsxs","ToDo","props","setToDos","addCategory","category","onClick","event","currentTarget","name","pre","targetIndex","findIndex","toDo","id","newToDo","text","slice","onDelete","newTodo","splice","children","TO_DO","DOING","DONE","filter","cat","map","ele","idx"],"sources":["/Users/minkyungkim/Documents/GitHub/MK-STUDY/Nomad/react-master-todo/src/components/ToDo.tsx"],"sourcesContent":["import { useRecoilValue, useSetRecoilState } from \"recoil\";\nimport { addCategoryState, Categories, categoryState, ITodDo, toDoState } from \"../atoms\";\n\nfunction ToDo(props: ITodDo){\n  const setToDos = useSetRecoilState(toDoState);\n  const addCategory = useRecoilValue(addCategoryState);\n  const category = useRecoilValue(categoryState);\n\n\n  function onClick(event:React.MouseEvent<HTMLButtonElement>){\n    const { currentTarget:{name} } = event; \n    setToDos(pre => {\n      // 1. find t0 d0 based id\n      const targetIndex = pre.findIndex(toDo => toDo.id === props.id)\n      // 2. preToDo change newToDo\n      const newToDo = {text:props.text, id:props.id, category: name as Categories}\n      return [...pre.slice(0,targetIndex), newToDo, ...pre.slice(targetIndex+1)];\n    })\n  }\n\n  function onDelete(event:React.MouseEvent<HTMLButtonElement>){\n    setToDos(pre => {\n      const newTodo = [...pre]\n      const targetIndex = pre.findIndex(toDo => toDo.id === props.id)\n      newTodo.splice(targetIndex,1)\n      return newTodo;\n    });\n  }\n\n  return (\n    <li>\n      <span>{props.text}</span>\n      {props.category !== Categories.TO_DO && <button name={Categories.TO_DO} onClick={onClick}>To Do</button>}\n      {props.category !== Categories.DOING && <button name={Categories.DOING} onClick={onClick}>Doing</button>}\n      {props.category !== Categories.DONE && <button name={Categories.DONE} onClick={onClick}>Done</button>}\n      { addCategory?.filter( cat => cat !== category ).map((ele,idx) => <button name={ele} key={idx} onClick={onClick}>{ele}</button>) }\n      <button onClick={onDelete}>Delete</button>\n    </li>\n  )\n}\n\nexport default ToDo;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}